<div class="compliance-container">
  <div class="header">
    <h3 class="title">Grievance Redressal / Escalation Matrix</h3>
    <p class="subtitle">If you have a grievance, you can reach out to our Support Team for assistance.</p>
  </div>

  <div *ngIf="isLoading" class="loading-indicator">
    Loading Compliance Data...
  </div>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && !errorMessage" class="content">
    <section class="escalation-matrix">
      <h4 class="section-title">Escalation Matrix</h4>
      <div class="table-wrapper">
        <table mat-table [dataSource]="escalationDataSource" class="mat-elevation-z8 mat-table">
          <ng-container matColumnDef="designation">
            <th mat-header-cell *matHeaderCellDef> Designation </th>
            <td mat-cell *matCellDef="let element"> {{ element.designation }} </td>
          </ng-container>

          <ng-container matColumnDef="contactPerson">
            <th mat-header-cell *matHeaderCellDef> Contact Person </th>
            <td mat-cell *matCellDef="let element"> {{ element.contact_Person }} </td>
          </ng-container>

          <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef> Address </th>
            <td mat-cell *matCellDef="let element"> {{ element.address }} </td>
          </ng-container>

          <ng-container matColumnDef="contactNo">
            <th mat-header-cell *matHeaderCellDef> Contact No. </th>
            <td mat-cell *matCellDef="let element"> <a class="contact-link" href="tel:{{ element.phone }}">{{ element.phone }}</a> </td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef> Email-ID </th>
            <td mat-cell *matCellDef="let element"> <a class="contact-link" href="mailto:{{ element.email }}">{{ element.email }}</a> </td>
          </ng-container>

          <ng-container matColumnDef="workingHours">
            <th mat-header-cell *matHeaderCellDef> Working Hours </th>
            <td mat-cell *matCellDef="let element"> {{ element.working_hours }} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedEscalationColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedEscalationColumns;"></tr>
        </table>
      </div>
    </section>

    <section class="important-links">
      <p>The above mentioned details would facilitate the complainants to approach the concerned RA before filing a complaint to SEBI. For more details, visit: <a href="https://www.bseindia.com" target="_blank" class="external-link">View Notice on BSE India</a></p>
      <p>We aim to resolve all grievances within 21 working days from the date of receipt.</p>
      <p>If your grievance is not resolved within this timeframe, you can escalate it to SEBIâ€™s SCORES Platform (SEBI Complaints Redress System).</p>
      <p>SCORES Portal: <a href="https://scores.sebi.gov.in/" target="_blank" class="external-link">SCORES Portal</a></p>
      <p>ODR Portal: <a href="https://smartodr.in/login" target="_blank" class="external-link">ODR Portal</a></p>
    </section>

    <section class="scores-section">
      <h4 class="section-title">Scores</h4>
      <div class="table-wrapper">
        <table mat-table [dataSource]="scoresDataSource" class="mat-elevation-z8 mat-table">
          <ng-container matColumnDef="received_from">
            <th mat-header-cell *matHeaderCellDef> Received From </th>
            <td mat-cell *matCellDef="let element"> {{ element.received_from }} </td>
          </ng-container>

          <ng-container matColumnDef="pending_at_the_end_of_last_month">
            <th mat-header-cell *matHeaderCellDef> Pending Last Month </th>
            <td mat-cell *matCellDef="let element"> {{ element.pending_at_the_end_of_last_month }} </td>
          </ng-container>

          <ng-container matColumnDef="received">
            <th mat-header-cell *matHeaderCellDef> Received </th>
            <td mat-cell *matCellDef="let element"> {{ element.received }} </td>
          </ng-container>

          <ng-container matColumnDef="resolved">
            <th mat-header-cell *matHeaderCellDef> Resolved </th>
            <td mat-cell *matCellDef="let element"> {{ element.resolved }} </td>
          </ng-container>

          <ng-container matColumnDef="total_pending">
            <th mat-header-cell *matHeaderCellDef> Total Pending </th>
            <td mat-cell *matCellDef="let element"> {{ element.total_pending }} </td>
          </ng-container>

          <ng-container matColumnDef="pending_Complaints_gte_3_months">
            <th mat-header-cell *matHeaderCellDef> Pending (>= 3 Months) </th>
            <td mat-cell *matCellDef="let element"> {{ element.pending_Complaints_gte_3_months }} </td>
          </ng-container>

          <ng-container matColumnDef="average_resolution_time">
            <th mat-header-cell *matHeaderCellDef> Avg. Resolution Time </th>
            <td mat-cell *matCellDef="let element"> {{ element.average_resolution_time }} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedScoresColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedScoresColumns;"></tr>
        </table>
      </div>
    </section>
  </div>
</div>